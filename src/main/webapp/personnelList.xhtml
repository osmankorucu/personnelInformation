<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui">
<h:head>
	<title>Personel Bilgi Sistemi | Personel Listesi</title>
	<link rel="shortcut icon" type="image/x-icon"
		href="#{resource['images/favicon.ico']}" />
</h:head>
<h:body>
	<style>
.ui-icon.fa {
	height: 25px;
}

.ui-button-text {
	width: auto;
	overflow: hidden;
	white-space: nowrap;
	text-overflow: ellipsis;
}

.outputLabelClass {
	width: 200px;
	overflow: hidden;
	white-space: nowrap;
	text-overflow: ellipsis;
}
</style>
	<script src="https://kit.fontawesome.com/59528223ba.js"
		crossorigin="anonymous"></script>

	<div style="margin: 1%">
		<h:panelGrid columns="1">
			<h:form>
				<p:panel style="width:99%;height:10%; background-color: #999999;">
					<p:commandButton value="Geri"
						icon="fa fa-fw far fa-angle-double-left" ajax="false"
						action="#{bean.navigateToIndex()}" />
					<p:outputLabel value="Personel Listesi"
						style="margin-left:30%; margin-right:30%; color: black"></p:outputLabel>
				</p:panel>
			</h:form>

			<h:panelGrid columns="1">
				<h:form id="form">
					<p:growl id="msgs" showDetail="true" />

					<!-- sortBy="#{personnel.prsId}" sortOrder="ascending" -->

					<p:dataTable id="cars1" resizableColumns="true" liveResize="true"
						scrollable="true" scrollWidth="190%" var="personnel"
						widgetVar="carsTable1" emptyMessage="Personel Bulunamadı"
						filteredValue="#{bean.filteredPersonnels}"
						value="#{bean.personnels}" editable="true"
						style="width:1300px; 
						margin-bottom:20px">

						<p:ajax event="rowEdit"
							listener="#{bean.updatePersonnel(personnel.prsId)}"
							update=":form:msgs" />
						<p:ajax event="rowEditCancel" resetValues="true"
							update=":form:msgs" />
						<p:ajax event="rowEditInit"
							listener="#{bean.createTempDatas(personnel.prsId)}" />
						<!-- ******************************************* -->
						<p:column style="width:15px" headerText="ID">
							<p:cellEditor>
								<f:facet name="output">
									<h:outputText value="#{personnel.prsId}" />
								</f:facet>
								<f:facet name="input">
									<p:inputText disabled="true" value="#{personnel.prsId}" />
								</f:facet>
							</p:cellEditor>
						</p:column>
						<p:column headerText="Fotoğraf">
							<p:cellEditor>
								<f:facet name="output">
									<p:commandLink onclick="PF('photoDlg').show();">
										<p:ajax listener="#{bean.getPersonnelPhoto(personnel.prsId)}"
											update="photoPanel" />
										<img alt="Personel Fotoğrafı" height="85" width="80"
											src="#{personnel.prsPhoto}" style="margin-left: 30%" />
									</p:commandLink>
								</f:facet>
								<f:facet name="input">
									<p:fileUpload mode="advanced" skinSimple="true"
										label="Fotoğraf Ekle"
										fileUploadListener="#{bean.onUploadImage}" multiple="false"
										fileLimit="1" auto="true" uploadLabel="false"
										allowTypes="/(\.|\/)(gif|jpe?g|png)$/"
										style="margin-left:6%;margin-top:2%" />
								</f:facet>
							</p:cellEditor>
						</p:column>

						<p:column headerText="TC No" filterBy="#{personnel.prsIDNumber}"
							filterMatchMode="contains">
							<p:cellEditor>
								<f:facet name="output">
									<h:outputText value="#{personnel.prsIDNumber}" />
								</f:facet>
								<f:facet name="input">
									<p:inputMask value="#{bean.newPrsIDNumber}"
										id="idNumberInputText" required="true" requiredMessage=""
										mask="99999999999" />
								</f:facet>
							</p:cellEditor>
						</p:column>

						<p:column headerText="Ad" filterBy="#{personnel.prsName}"
							filterMatchMode="contains">
							<p:cellEditor>
								<f:facet name="output">
									<h:outputText value="#{personnel.prsName}" />
								</f:facet>
								<f:facet name="input">
									<p:inputText value="#{bean.newPrsName}" id="nameInputText"
										required="true" requiredMessage="">
										<p:keyFilter regEx="/[a-zA-ZğĞüÜşŞıİöÖçÇ]/i" />
									</p:inputText>
								</f:facet>
							</p:cellEditor>
						</p:column>

						<p:column headerText="Soyad" filterBy="#{personnel.prsSurname}"
							filterMatchMode="contains">
							<p:cellEditor>
								<f:facet name="output">
									<h:outputText value="#{personnel.prsSurname}" />
								</f:facet>
								<f:facet name="input">
									<p:inputText value="#{bean.newPrsSurname}"
										id="surnameInputText" required="true" requiredMessage="">
										<p:keyFilter regEx="/[a-zA-ZğĞüÜşŞıİöÖçÇ]/i" />
									</p:inputText>
								</f:facet>
							</p:cellEditor>
						</p:column>
						<p:column headerText="Cinsiyet" filterBy="#{personnel.prsSex}"
							filterMatchMode="contains">
							<f:facet name="filter">
								<p:selectOneButton onchange="PF('carsTable1').filter()"
									styleClass="custom-filter">
									<f:selectItem itemLabel="T" itemValue="" />
									<f:selectItem itemLabel="E" itemValue="Erkek" />
									<f:selectItem itemLabel="K" itemValue="Kadın" />
								</p:selectOneButton>
							</f:facet>
							<p:cellEditor>
								<f:facet name="output">
									<h:outputText value="#{personnel.prsSex}" />
								</f:facet>
								<f:facet name="input">
									<p:selectOneMenu value="#{bean.newPrsSex}" style="width:84%"
										id="console" required="true" requiredMessage="">
										<f:selectItem itemLabel="Seçiniz" itemValue="" />
										<f:selectItem itemLabel="Erkek" itemValue="Erkek" />
										<f:selectItem itemLabel="Kadın" itemValue="Kadın" />
										<f:facet name="footer">
											<p:separator />
											<p:outputLabel value="3 consoles" style="font-weight:bold;" />
										</f:facet>
									</p:selectOneMenu>
								</f:facet>
							</p:cellEditor>
						</p:column>
						<p:column headerText="Doğum Tarihi"
							filterBy="#{personnel.prsDateOfBirth}" filterMatchMode="contains">
							<p:cellEditor>
								<f:facet name="output">
									<h:outputText value="#{personnel.prsDateOfBirth}" />
								</f:facet>
								<f:facet name="input">
									<p:calendar value="#{bean.newPrsDateOfBirth}"
										id="dobButtonDate" locale="tr" navigator="true"
										pattern="dd.MM.yyyy" required="true" requiredMessage=""
										autocomplete="off" />
								</f:facet>
							</p:cellEditor>
						</p:column>

						<p:column headerText="Medeni Durum"
							filterBy="#{personnel.prsIsMarried}" filterMatchMode="equals">
							<f:facet name="filter">
								<p:selectOneButton onchange="PF('carsTable1').filter()"
									styleClass="custom-filter">
									<f:selectItem itemLabel="T" itemValue="" />
									<f:selectItem itemLabel="E" itemValue="Evli" />
									<f:selectItem itemLabel="B" itemValue="Bekar" />
								</p:selectOneButton>
							</f:facet>
							<p:cellEditor>
								<f:facet name="output">
									<h:outputText value="#{personnel.prsIsMarried}" />
								</f:facet>
								<f:facet name="input">
									<p:selectOneMenu value="#{bean.newPrsIsMarried}"
										style="width:84%" id="console2" required="true"
										requiredMessage="">
										<f:selectItem itemLabel="Seçiniz" itemValue="" />
										<f:selectItem itemLabel="Bekar" itemValue="Bekar" />
										<f:selectItem itemLabel="Evli" itemValue="Evli" />
										<f:facet name="footer2">
											<p:separator />
											<p:outputLabel value="3 consoles" style="font-weight:bold;" />
										</f:facet>
									</p:selectOneMenu>
								</f:facet>
							</p:cellEditor>
						</p:column>

						<p:column headerText="Çocuğu var mı?">
							<p:cellEditor>
								<f:facet name="output">
									<p:commandLink value="Detay" onclick="PF('dlg2').show();" />
								</f:facet>
								<f:facet name="input">
									<p:outputLabel style="margin-left:50%" value="-" />
								</f:facet>
							</p:cellEditor>
						</p:column>
						<p:column headerText="Eğitim Durumu">
							<p:cellEditor>
								<f:facet name="output">
									<p:commandLink value="Detay" onclick="PF('dlg3').show();" />
								</f:facet>
								<f:facet name="input">
									<p:outputLabel style="margin-left:50%" value="-" />
								</f:facet>
							</p:cellEditor>
						</p:column>
						<p:column headerText="E-Posta" filterBy="#{personnel.prsEMail}"
							filterMatchMode="contains">
							<p:cellEditor>
								<f:facet name="output">
									<h:outputText value="#{personnel.prsEMail}" />
								</f:facet>
								<f:facet name="input">
									<p:inputText value="#{bean.newPrsEMail}" style="width:615px"
										id="emailInputText" validatorMessage="!" required="true"
										requiredMessage="">
										<f:validateRegex
											pattern="^[_A-Za-z0-9-\+]+(\.[_A-Za-z0-9-]+)*@[A-Za-z0-9-]+(\.[A-Za-z0-9]+)*(\.[A-Za-z]{2,})$"></f:validateRegex>
									</p:inputText>
								</f:facet>
							</p:cellEditor>
						</p:column>

						<p:column headerText="Telefon"
							filterBy="#{personnel.prsPhoneNumber}" filterMatchMode="contains">

							<p:cellEditor>
								<f:facet name="output">
									<h:outputText value="#{personnel.prsPhoneNumber}" />
								</f:facet>
								<f:facet name="input">
									<p:inputMask value="#{bean.newPrsPhoneNumber}"
										id="phoneInputText" required="true" requiredMessage=""
										mask="(999) 999-9999" />
								</f:facet>
							</p:cellEditor>
						</p:column>

						<p:column headerText="Adres" filterBy="#{personnel.prsAddress}"
							filterMatchMode="contains">
							<p:cellEditor>
								<f:facet name="output">
									<h:outputText value="#{personnel.prsAddress}" />
								</f:facet>
								<f:facet name="input">
									<p:inputText value="#{bean.newPrsAddress}" id="adresTextArea"
										required="true" requiredMessage="" />
								</f:facet>
							</p:cellEditor>
						</p:column>
						<p:column headerText="Sil" style="width:5px">
							<p:commandLink ajax="true" class="fa fa-fw fa-user-times"
								actionListener="#{bean.deletePersonnel(personnel)}">
								<p:ajax update="form"></p:ajax>
							</p:commandLink>
						</p:column>
						<p:column style="width:25px" headerText="Düzenle">
							<p:rowEditor />
						</p:column>
					</p:dataTable>
				</h:form>
			</h:panelGrid>
		</h:panelGrid>
		<p:dialog header="Personel Fotoğrafı" widgetVar="photoDlg"
			resizable="false" modal="true" height="450" width="390">
			<p:panel id="photoPanel" style="border:none">
				<img alt="Personel Fotoğrafı" height="350" width="300"
					src="#{bean.tempPrsPhoto}" />
			</p:panel>
		</p:dialog>

		<p:dialog header="Çocuk Bilgileri" widgetVar="dlg2" resizable="false"
			modal="true" height="250">
			<h:panelGrid columns="2">
				<h:form>
					<h:panelGrid columns="2">
						<p:inputText style="width:615px" id="search"
							placeholder="Arama Yap..." />

						<p:commandButton style="width:100%" value="Ara"
							onkeyup="PF('carsTable1').filter()" icon="fa fa-fw fa-user-times"
							type="button" />
					</h:panelGrid>
				</h:form>
			</h:panelGrid>

			<h:panelGrid columns="1">
				<h:form id="form2">
					<p:growl id="msgs2" showDetail="true" />
					<p:dataTable id="cars12" var="car" value="" editable="true"
						style="margin-bottom:20px">
						<p:ajax event="rowEdit" listener="#{dtEditView.onRowEdit}"
							update=":form:msgs" />
						<p:ajax event="rowEditCancel" listener="#{dtEditView.onRowEdit}"
							update=":form:msgs" />
						<p:column headerText="ID" style="width:15px">
							<p:cellEditor>
								<f:facet name="output">
									<h:outputText value="" />
								</f:facet>
								<f:facet name="input">
									<p:inputText value="" />
								</f:facet>
							</p:cellEditor>
						</p:column>

						<p:column headerText="Ad">
							<p:cellEditor>
								<f:facet name="output">
									<h:outputText value="" />
								</f:facet>
								<f:facet name="input">
									<p:inputText value="" />
								</f:facet>
							</p:cellEditor>
						</p:column>

						<p:column headerText="Soyad">
							<p:cellEditor>
								<f:facet name="output">
									<h:outputText value="" />
								</f:facet>
								<f:facet name="input">
									<p:inputText value="" />
								</f:facet>
							</p:cellEditor>
						</p:column>
						<p:column headerText="Cinsiyet">
							<p:cellEditor>
								<f:facet name="output">
									<h:outputText value="" />
								</f:facet>
								<f:facet name="input">
									<p:inputText value="" />
								</f:facet>
							</p:cellEditor>
						</p:column>
						<p:column headerText="Doğum Tarihi">
							<p:cellEditor>
								<f:facet name="output">
									<h:outputText value="" />
								</f:facet>
								<f:facet name="input">
									<p:inputText value="" />
								</f:facet>
							</p:cellEditor>
						</p:column>

						<p:column style="width:5px" headerText="Sil">
							<p:commandLink class="fa fa-fw fa-user-times" />
						</p:column>
						<p:column style="width:25px" headerText="Düzenle">
							<p:rowEditor />
						</p:column>
					</p:dataTable>
				</h:form>
			</h:panelGrid>
		</p:dialog>
		<p:dialog header="Eğitim Bilgileri" widgetVar="dlg3" resizable="false"
			modal="true" height="275">
			<h:panelGrid columns="2">
				<h:form>
					<h:panelGrid columns="2">
						<p:inputText style="width:615px" id="search"
							placeholder="Arama Yap..." />

						<p:commandButton style="width:100%" value="Ara"
							onkeyup="PF('carsTable1').filter()" icon="fa fa-fw fa-search"
							type="button" />
					</h:panelGrid>
				</h:form>
			</h:panelGrid>

			<h:panelGrid columns="1">
				<h:form id="form3">
					<p:growl id="msgs3" showDetail="true" />
					<p:dataTable id="cars13" var="car" value="" editable="true"
						style="margin-bottom:20px">
						<p:ajax event="rowEdit" listener="#{dtEditView.onRowEdit}"
							update=":form:msgs" />
						<p:ajax event="rowEditCancel" listener="#{dtEditView.onRowEdit}"
							update=":form:msgs" />
						<p:column headerText="ID" style="width:15px">
							<p:cellEditor>
								<f:facet name="output">
									<h:outputText value="" />
								</f:facet>
								<f:facet name="input">
									<p:inputText value="" />
								</f:facet>
							</p:cellEditor>
						</p:column>

						<p:column headerText="Ad">
							<p:cellEditor>
								<f:facet name="output">
									<h:outputText value="" />
								</f:facet>
								<f:facet name="input">
									<p:inputText value="" />
								</f:facet>
							</p:cellEditor>
						</p:column>

						<p:column headerText="Bulunduğu İl">
							<p:cellEditor>
								<f:facet name="output">
									<h:outputText value="" />
								</f:facet>
								<f:facet name="input">
									<p:inputText value="" />
								</f:facet>
							</p:cellEditor>
						</p:column>
						<p:column headerText="Türü">
							<p:cellEditor>
								<f:facet name="output">
									<h:outputText value="" />
								</f:facet>
								<f:facet name="input">
									<p:inputText value="" />
								</f:facet>
							</p:cellEditor>
						</p:column>
						<p:column headerText="Başlama Tarihi">
							<p:cellEditor>
								<f:facet name="output">
									<h:outputText value="" />
								</f:facet>
								<f:facet name="input">
									<p:inputText value="" />
								</f:facet>
							</p:cellEditor>
						</p:column>

						<p:column headerText="Bitirme Tarihi">
							<p:cellEditor>
								<f:facet name="output">
									<h:outputText value="" />
								</f:facet>
								<f:facet name="input">
									<p:inputText value="" />
								</f:facet>
							</p:cellEditor>
						</p:column>

						<p:column style="width:10px" headerText="Sil">
							<p:commandLink class="fa fa-fw fa-user-times" />
						</p:column>
						<p:column style="width:25px" headerText="Düzenle">
							<p:rowEditor />
						</p:column>
					</p:dataTable>
				</h:form>
			</h:panelGrid>
		</p:dialog>
	</div>
</h:body>
</html>